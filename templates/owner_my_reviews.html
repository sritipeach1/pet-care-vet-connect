{% extends "base.html" %}
{% block content %}

<div class="max-w-5xl mx-auto">

  <!-- TOP BAR NAV -->
  <div class="flex items-center justify-between mb-6">
    <div class="flex space-x-2 bg-blue-100 rounded-full px-1 py-1 text-sm">
      <a href="{{ url_for('owner_search') }}"
         class="px-4 py-1 rounded-full text-blue-700 hover:bg-blue-200">
        Search
      </a>
      <a href="{{ url_for('owner_appointments') }}"
         class="px-4 py-1 rounded-full text-blue-700 hover:bg-blue-200">
        Appointment
      </a>
      <a href="{{ url_for('owner_dashboard', tab='pets') }}"
         class="px-4 py-1 rounded-full text-blue-700 hover:bg-blue-200">
        My Pets
      </a>
      <a href="{{ url_for('owner_dashboard', tab='owner') }}"
         class="px-4 py-1 rounded-full text-blue-700 hover:bg-blue-200">
        Profile
      </a>

      <!-- ACTIVE -->
      <a href="{{ url_for('owner_my_reviews') }}"
         class="px-4 py-1 rounded-full bg-blue-600 text-white">
        My Reviews
      </a>

      {% if owner and owner['is_premium'] %}
        <a href="{{ url_for('owner_petbot') }}"
            class="px-4 py-1 rounded-full text-blue-700 hover:bg-blue-200">
          PetBot ⭐
        </a>
      {% else %}
        <a href="{{ url_for('pricing') }}"
            class="px-4 py-1 rounded-full text-gray-400 bg-blue-50 border border-dashed border-blue-200">
          PetBot (Locked)
        </a>
      {% endif %}
    </div>
  </div>

  <!-- PAGE TITLE -->
  <h2 class="text-xl font-semibold text-blue-800 mb-3">My Reviews</h2>
  <p class="text-xs text-gray-500 mb-5">
    These are all the reviews you have submitted after completing appointments.
  </p>

  {% if reviews and reviews|length > 0 %}
    <div class="space-y-4">

      {% for r in reviews %}
        <div class="bg-white rounded-2xl border border-blue-100 px-5 py-4 shadow-sm">

          <div class="flex justify-between items-start">

            <div>
              <p class="text-sm font-semibold text-blue-900">
                {{ r['clinic_name'] }} • {{ r['doctor_name'] }}
              </p>
              <p class="text-xs text-gray-500 mt-0.5">
                Pet: {{ r['pet_name'] }} · Appointment: {{ r['appointment_date'] }}
              </p>

              <p class="text-xs text-gray-400 mt-0.5">
                Reviewed at: {{ r['reviewed_at'] }}
              </p>
            </div>

            <!-- Doctor Rating Badge -->
            <div class="flex items-center gap-2">
              <span class="text-xs px-3 py-1 rounded-full bg-yellow-50 text-yellow-700 border border-yellow-200">
                ★ {{ r['rating'] }}/5
              </span>
            </div>

          </div>

          <!-- ✅ Doctor Review -->
          {% if r['doctor_review'] %}
            <div class="mt-3 bg-blue-50 border border-blue-100 rounded-2xl px-4 py-3">
              <p class="text-xs font-semibold text-blue-800 mb-1">Doctor Review</p>
              <p class="text-sm text-gray-700">{{ r['doctor_review'] }}</p>
            </div>
          {% endif %}

          <!-- ✅ Clinic Review (Optional) -->
          {% if r['clinic_review'] %}
            <div class="mt-3 bg-indigo-50 border border-indigo-100 rounded-2xl px-4 py-3">
              <p class="text-xs font-semibold text-indigo-800 mb-1">Clinic Review</p>
              <p class="text-sm text-gray-700">{{ r['clinic_review'] }}</p>
            </div>
          {% endif %}

        </div>
      {% endfor %}

    </div>

  {% else %}
    <div class="bg-white rounded-2xl border border-dashed border-blue-200 p-8 text-center text-sm text-gray-500">
      You haven’t submitted any reviews yet. Complete an appointment first, then leave a review.
    </div>
  {% endif %}

</div>

{% endblock %}
